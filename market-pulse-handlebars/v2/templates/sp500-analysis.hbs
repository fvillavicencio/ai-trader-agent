{{#if sp500}}
<div class="section-container sp500-section">
  <div class="section-title">S&P 500 Analysis</div>
  
  <div class="sp500-row">
    <!-- S&P 500 Index Level Card -->
    <div class="sp500-index-card">
      <div class="sp500-card-header">S&P 500 Index Level</div>
      <div class="sp500-index-value">{{sp500.indexLevel}}</div>
      <div class="sp500-card-source">
        Source: <a href="{{sp500.sourceUrl}}" target="_blank">{{sp500.source}}</a> ({{sp500.asOf}})
      </div>
    </div>
    
    <!-- Trailing P/E Ratio Card -->
    <div class="sp500-pe-card">
      <div class="sp500-card-header">Trailing P/E Ratio</div>
      <div class="sp500-pe-table">
        <table>
          <thead>
            <tr>
              <th>Current</th>
              <th>5-Year Avg</th>
              <th>10-Year Avg</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{sp500.trailingPE.current}}</td>
              <td>{{sp500.trailingPE.fiveYearAvg}}</td>
              <td>{{sp500.trailingPE.tenYearAvg}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="sp500-card-source">
        Source: <a href="{{sp500.trailingPE.sourceUrl}}" target="_blank">{{sp500.trailingPE.source}}</a> ({{sp500.trailingPE.asOf}})
      </div>
    </div>
  </div>
  
  <!-- Earnings Per Share Section -->
  <div class="sp500-section-title">Earnings Per Share (TTM)</div>
  <div class="sp500-eps-table">
    <table>
      <thead>
        <tr>
          <th>TTM EPS</th>
          <th>Target @ 15x</th>
          <th>Target @ 17x</th>
          <th>Target @ 20x</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>${{sp500.earnings.ttm}}</td>
          <td>${{sp500.earnings.target15x}}</td>
          <td>${{sp500.earnings.target17x}}</td>
          <td>${{sp500.earnings.target20x}}</td>
        </tr>
      </tbody>
    </table>
    <div class="sp500-card-source">
      Source: <a href="{{sp500.earnings.sourceUrl}}" target="_blank">{{sp500.earnings.source}}</a> ({{sp500.earnings.asOf}})
    </div>
  </div>
  
  <!-- Forward EPS Projections -->
  <div class="sp500-section-title">Forward EPS Projections</div>
  <div class="sp500-forward-eps-table">
    <table>
      <thead>
        <tr>
          {{#each sp500.forwardEPS.years}}
            <th>{{this}}</th>
          {{/each}}
        </tr>
      </thead>
      <tbody>
        <tr>
          {{#each sp500.forwardEPS.values}}
            <td>${{this}}</td>
          {{/each}}
        </tr>
      </tbody>
    </table>
    <div class="sp500-card-source">
      Source: <a href="{{sp500.forwardEPS.sourceUrl}}" target="_blank">{{sp500.forwardEPS.source}}</a> ({{sp500.forwardEPS.asOf}})
    </div>
  </div>
  
  <!-- ETF Holdings Section -->
  <div class="sp500-section-title">Top 5 Weighted Stocks in Major Indices</div>
  <div class="etf-holdings-cards">
    {{#each sp500.etfHoldings}}
      <div class="etf-holding-card">
        <div class="etf-holding-header">{{this.name}} <span>({{this.symbol}})</span></div>
        <div class="etf-holding-subheader">Top 5 Holdings:</div>
        <div class="etf-holding-rows">
          {{#each this.holdings}}
            <div class="etf-holding-row">
              <span class="etf-holding-symbol">{{this.symbol}}</span>
              <span class="etf-holding-name">{{this.name}}</span>
              <span class="etf-holding-weight">{{this.weight}}%</span>
            </div>
          {{/each}}
        </div>
      </div>
    {{/each}}
  </div>
  <div class="etf-holding-source">
    Source: <a href="{{sp500.etfSource.sourceUrl}}" target="_blank">{{sp500.etfSource.source}}</a> ({{sp500.etfSource.asOf}})
  </div>
</div>
{{/if}}
